## Frontend Test Beginner
書籍『[フロントエンド開発のためのテスト入門 今からでも知っておきたい自動テスト戦略の必須知識](https://www.shoeisha.co.jp/book/detail/9784798178639)』の個人用学習リポジトリ

- [当該書籍公式リポジトリ](https://github.com/frontend-testing-book)

### 書籍で使用しているライブラリやフレームワーク
- React：UIコンポーネントライブラリ
- Next.js：ReactベースのWebアプリケーションフレームワーク
- Zod：バリデーションライブラリ
- React Hook Form：Reactフォーム実装ライブラリ
- Prisma：データベースに接続するORMライブラリ
- Jest：CLIベースのテスティングフレームワーク、テストランナー
- Playwright：Microsoftが開発したWeb UI自動化テストフレームワーク（E2Eテストツール）。ヘッドレスブラウザを含んだテスティングフレームワーク、テストランナー
- reg-suit：ビジュアルリグレッション / テスティングフレームワーク
- Storybook：UIコンポーネントカタログ。個々のUIコンポーネントを単体で開発、テスト、文書化できるツール

## 大前提として | `Behavior-Driven Development`：ビヘイビア駆動開発を意識
テストはあくまで**振る舞い・挙動**にスポットをあてる。実装ロジックや技術的観点などユーザー目線（UX基準）から外れたところをテスト軸としない。<br>
何のためのテストなのか「目的」と「手段」を履き違えないよう`BDD`（`Behavior-Driven Development`）ビヘイビア駆動開発を意識したい。

---

## テストの範囲と種類
1. ライブラリが提供する関数
2. ロジックを担う関数
3. UIを表現する関数
4. Web API クライアント
5. APIサーバー
6. DB（サーバー）

### 静的解析
TypeScriptやESLintによる静的解析を指す。一つひとつのモジュール内部検証だけでなく、2と3の間、3と4の間、というように**隣接するモジュール間連携の不整合**に対して検証する
- ESLint：<br>不適切な構文を回避することで潜在的なバグ混入を未然に防止できたり、将来的に非推奨となるAPIに気づきやすくなったりするといった「コード規約の強制（コーディングガイドラインの設定）」を実施

### 単体テスト（ユニットテスト）
2のみ、3のみ、というように**モジュール単体が提供する機能（振る舞い）**にスポットをあてたテスト。独立検証が可能なためアプリケーション稼働時にはめったに発生しないケース（エッジケース / コーナーケース）の検証に向いている。<br>
※昨今はAIを活用すれば単体テストは比較的容易に作成できる

> [!NOTE]
> テスト対象モジュールが定められた入力値から期待する出力値が得られるかをテストする。SPAを一例にすると、入力値（`props`）から出力値（JSX：HTMLのブロック）を得るUIコンポーネントは、関数の単体テストと同じ要領で検証できる。<br>
> 単体テストは**テスト対象モジュール（の振る舞い）にフォーカスする**ため、エッジケースや例外を考慮するのに有用で**挙動や処理の想定ケース考慮漏れの防止にも寄与**する。

### 結合テスト（インテグレーションテスト）
1～4まで、2～3まで、というように**モジュール同士をつなげることで提供できる機能（振る舞い）**にスポットをあてたテスト。範囲が広いほどテスト対象を効率よくカバーできるが、相対的にざっくりとした検証になる傾向がある。

> [!NOTE]
> 多くのWebアプリケーションは様々な機能が関連しあってサービスとして成り立っているので、必然的にボリュームが大きくなる傾向にある。<br>
> 複数モジュールが連携する機能（振る舞い）にフォーカスをあてるテストという性質から、結合テストとしてカバーする領域・範囲を定義し、柔軟に（広い範囲での結合テスト、または狭い範囲での結合テストなど）組み分けられるのも特徴。<br>
> 例えば、エッジケースを考慮した複雑なケースの場合には狭い範囲にしたほうがテスト対象が明確になりやすい。

### E2Eテスト
1～6を通して、ヘッドレスブラウザ + UIオートメーションで実施するテスト。実地テストに近い性質なので、最も広範囲な結合テストとなり、アプリケーション稼働状況に忠実な検証となる。
- `ヘッドレスブラウザ`：<br>GUI（グラフィカル・ユーザー・インターフェース）を備えていないブラウザを指す。

> [!NOTE]
> UIテストに加え、外部ストレージや連携するサブシステムを含むテストを行える。フォームテストを一例にすると、入力内容に応じて保存された値が更新されるので、画面をまたいだ機能（入力内容確認ページ）はもちろん、外部連携（住所の自動入力）が正常に機能しているかチェックできる。

## テストの目的（テストタイプ）
機能テスト、非機能テスト、ホワイトボックステスト、リグレッションテストなどがあり、フロントエンドで代表的なのは以下となる。

### 機能テスト（操作・インタラクションテスト）
開発対象の機能（振る舞い）に不具合がないかを検証する。フロントエンドでは主にUIコンポーネントの操作（インタラクション）がアプリケーションの挙動起点となるので、インタラクションテストが機能テストに位置付けられる。ブラウザAPIを用いるのが重要なテストの場合はE2Eテストツールを通じて自動テストを書く（例：[playwrightのcodegen](https://zenn.dev/b13o/articles/about-playwright#playwright-%E3%81%AE-codegen%EF%BC%88%E3%83%86%E3%82%B9%E3%83%88%E3%82%B3%E3%83%BC%E3%83%89%E8%87%AA%E5%8B%95%E7%94%9F%E6%88%90%EF%BC%89%E3%81%A8%E3%81%AF%EF%BC%9F)）。

### 非機能テスト（アクセシビリティテスト）
心身特性に隔てのないサービスを提供できているかという検証。Webアクセシビリティに関するAPIが様々なプラットフォームで展開されており、自動テストでも客観的に判定できる環境が整っている。

### リグレッションテスト（デグレーションテスト）
デグレーションが発生していないかを確認するためのテスト手法。ある特定時点から前後の差分を検出して**想定外の不具合が発生していないか**を検証するテストを指す。
- デグレーション：<br>システムやプログラムの機能が、修正や更新によって劣化してしまう現象

---

## 用語集

